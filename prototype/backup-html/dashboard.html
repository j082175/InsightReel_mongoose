<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜ìƒ ìˆ˜ì§‘ ëŒ€ì‹œë³´ë“œ - í”„ë¡œí† íƒ€ì…</title>
    
    <!-- Permissions Policy ì„¤ì • (ê¶Œí•œ ì˜¤ë¥˜ í•´ê²°) -->
    <meta http-equiv="Permissions-Policy" content="autoplay=*, encrypted-media=*, accelerometer=*, gyroscope=*, picture-in-picture=*, clipboard-write=*, web-share=*">
    
    <!-- Feature Policy í´ë°± (êµ¬í˜• ë¸Œë¼ìš°ì €) -->
    <meta http-equiv="Feature-Policy" content="autoplay *; encrypted-media *; accelerometer *; gyroscope *; picture-in-picture *">
    <!-- CSP ë³´ì•ˆ ì •ì±… ì„¤ì • (ì™„ì „ í•´ê²°) -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob:; 
        connect-src 'self' http://localhost:3000 https://localhost:3000 https://www.youtube.com https://www.youtube-nocookie.com https://img.youtube.com; 
        frame-src 'self' https://www.youtube.com https://www.youtube-nocookie.com https://www.instagram.com; 
        img-src 'self' https://img.youtube.com https://i.ytimg.com https://www.instagram.com data: blob:; 
        script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.youtube.com https://www.youtube-nocookie.com; 
        style-src 'self' 'unsafe-inline' https://www.youtube.com https://www.youtube-nocookie.com;
        worker-src 'self' blob:;
        child-src 'self' https://www.youtube.com https://www.youtube-nocookie.com;
    ")
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ğŸ¬</text></svg>" type="image/svg+xml">
    
    <!-- Resource Hints - ìƒìš© ì›¹ì‚¬ì´íŠ¸ ìµœì í™” ê¸°ë²• -->
    <link rel="dns-prefetch" href="//localhost:3000">
    <link rel="preconnect" href="http://localhost:3000">
    <link rel="dns-prefetch" href="//img.youtube.com">
    <!-- CSS Variables System - í™•ì¥ ê°€ëŠ¥í•œ í…Œë§ˆ ì‹œìŠ¤í…œ -->
    <link rel="preload" href="dashboard-variables.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="dashboard-variables.css"></noscript>
    <!-- Critical CSS - ì²« í™”ë©´ ë Œë”ë§ì— í•„ìš”í•œ ê²ƒë§Œ ì¸ë¼ì¸ìœ¼ë¡œ -->
    <style>
        /* Critical CSS Variables - ì¦‰ì‹œ í•„ìš”í•œ ë³€ìˆ˜ë“¤ë§Œ */
        :root{--primary:#1976d2;--bg-primary:#fff;--bg-secondary:#f5f5f5;--text-secondary:#666;--bg-accent:#e3f2fd;--shadow-sm:0 2px 4px rgba(0,0,0,.1);--shadow-md:0 4px 12px rgba(0,0,0,0.1);--spacing-sm:.5rem;--spacing-md:1rem;--spacing-lg:1.5rem;--spacing-xl:2rem}
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg-secondary);line-height:1.4}
        .header{background:var(--bg-primary);box-shadow:var(--shadow-sm);padding:var(--spacing-md) var(--spacing-xl);position:sticky;top:0;z-index:100}
        .header h1{color:var(--primary);font-size:1.5rem;margin-bottom:var(--spacing-md)}
        .nav-tabs{display:flex;gap:var(--spacing-md)}
        .tab{padding:var(--spacing-sm) var(--spacing-md);border:none;background:var(--bg-accent);border-radius:20px;cursor:pointer;font-size:.9rem}
        .tab.active{background:var(--primary);color:#fff}
        .main-content{padding:var(--spacing-xl);max-width:1400px;margin:0 auto}
        .hidden{display:none!important}
        .stats-bar{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:var(--spacing-md);margin-bottom:var(--spacing-xl)}
        .stat-card{background:var(--bg-primary);padding:var(--spacing-lg);border-radius:12px;box-shadow:var(--shadow-md);text-align:center;cursor:pointer}
        .stat-number{font-size:2rem;font-weight:bold;color:var(--primary);margin-bottom:var(--spacing-sm)}
        .stat-label{color:var(--text-secondary);font-size:.9rem}
        /* ì¸ë„¤ì¼ í”Œë ˆì´ìŠ¤í™€ë” */
        .thumbnail-placeholder{width:100%;height:180px;background:#f0f0f0!important;display:flex!important;align-items:center;justify-content:center;color:var(--text-secondary)!important;font-size:16px!important;font-weight:bold}
        /* ì•„ë°”íƒ€ ìŠ¤íƒ€ì¼ */
        .channel-avatar{width:24px;height:24px;background:#ddd;border-radius:50%;margin-right:var(--spacing-sm);display:flex;align-items:center;justify-content:center;font-size:12px}
    </style>
    
    <!-- ì»´í¬ë„ŒíŠ¸ CSS ì‹œìŠ¤í…œ -->
    <link rel="preload" href="components/components.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="components/components.css"></noscript>
    
    <!-- ë‚˜ë¨¸ì§€ CSSëŠ” ë¹„ë™ê¸°ë¡œ ë¡œë“œ (ë Œë”ë§ ì°¨ë‹¨ ì•ˆí•¨) -->
    <link rel="preload" href="dashboard-original.css?v=6.1.dedup-fix" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="dashboard-original.css?v=6.1.dedup-fix"></noscript>
    
    <!-- TrustedScript ì˜¤ë¥˜ ì™„ì „ ë°©ì§€ + ì½˜ì†” ì˜¤ë¥˜ í•„í„°ë§ -->
    <script>
    // ë¸Œë¼ìš°ì € í™•ì¥ í”„ë¡œê·¸ë¨ ìŠ¤í¬ë¦½íŠ¸ ê°„ì„­ ì°¨ë‹¨
    if (typeof trustedTypes !== 'undefined' && trustedTypes.createPolicy) {
        trustedTypes.createPolicy('default', {
            createHTML: (html) => html,
            createScript: (script) => script,
            createScriptURL: (url) => url,
        });
    }
    
    // íŠ¹ì • ì˜¤ë¥˜ ë©”ì‹œì§€ í•„í„°ë§ (ì„ íƒì )
    const originalError = console.error;
    const originalWarn = console.warn;
    
    console.error = function(...args) {
        const message = args.join(' ');
        // í™•ì¥ í”„ë¡œê·¸ë¨ ê´€ë ¨ ì˜¤ë¥˜ ìˆ¨ê¸°ê¸°
        if (message.includes('CORS policy') || 
            message.includes('tbvws.js') || 
            message.includes('content_script.js') ||
            message.includes('VDH ProcessPage') ||
            message.includes('Immersive Translate')) {
            return; // ì˜¤ë¥˜ ì¶œë ¥ ì•ˆí•¨
        }
        originalError.apply(console, args);
    };
    
    console.warn = function(...args) {
        const message = args.join(' ');
        // ì ‘ê·¼ì„± ê²½ê³  ìˆ¨ê¸°ê¸°
        if (message.includes('aria-hidden') || 
            message.includes('assistive technology')) {
            return; // ê²½ê³  ì¶œë ¥ ì•ˆí•¨
        }
        originalWarn.apply(console, args);
    };
    </script>
    
    <!-- ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ ì‹œìŠ¤í…œ ë¡œë“œ -->
    <script src="config/dashboard-config.js" defer></script>
    <script src="components/TabManager.js" defer></script>
    <script src="components/StatCard.js" defer></script>
    
    <!-- JavaScript íŒŒì¼ ë¡œë“œ (ìºì‹œ ë°©ì§€ìš© ë²„ì „) -->
    <script src="dashboard.js?v=7.0.final&t=20250903-2043&bust=true" async></script>
</head>
<body>
    <div class="header">
        <h1>ğŸ¬ ì˜ìƒ ìˆ˜ì§‘ ëŒ€ì‹œë³´ë“œ</h1>
        <div class="nav-tabs">
            <button class="tab active" onclick="showTab('videos')">ìˆ˜ì§‘ëœ ì˜ìƒ</button>
            <button class="tab" onclick="showTab('trending')">ğŸ”¥ YouTube íŠ¸ë Œë”©</button>
            <button class="tab" onclick="showTab('channels')">ì±„ë„ ê´€ë¦¬</button>
            <button class="tab" onclick="showTab('analytics')">ë¶„ì„ ë¦¬í¬íŠ¸</button>
        </div>
    </div>

    <div class="main-content">
        <!-- í†µê³„ ë°” -->
        <div class="stats-bar">
            <div class="stat-card">
                <div class="stat-number">2,847</div>
                <div class="stat-label">ì´ ì˜ìƒ</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">187</div>
                <div class="stat-label">ì±„ë„ ìˆ˜</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">23</div>
                <div class="stat-label">ì˜¤ëŠ˜ ìˆ˜ì§‘</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">15</div>
                <div class="stat-label">ì¹´í…Œê³ ë¦¬</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="quota-remaining">-</div>
                <div class="stat-label">ë‚¨ì€ Quota</div>
            </div>
            <div class="stat-card" onclick="testServerConnection()">
                <div class="stat-number">ğŸ”Œ</div>
                <div class="stat-label">ì„œë²„ ì—°ê²° í…ŒìŠ¤íŠ¸</div>
            </div>
        </div>

        <!-- ê²€ìƒ‰ ì„¹ì…˜ -->
        <div class="search-section">
            <div class="search-grid">
                <input type="text" class="search-input" placeholder="í‚¤ì›Œë“œ, ì±„ë„ëª…, ì œëª© ê²€ìƒ‰..." id="searchInput">
                <select class="filter-select" id="categoryFilter">
                    <option value="">ëª¨ë“  ì¹´í…Œê³ ë¦¬</option>
                    <option value="ê²Œì„">ê²Œì„</option>
                    <option value="ë·°í‹°">ë·°í‹°</option>
                    <option value="ìš”ë¦¬">ìš”ë¦¬</option>
                    <option value="ê¸°ìˆ ">ê¸°ìˆ </option>
                    <option value="êµìœ¡">êµìœ¡</option>
                </select>
                <select class="filter-select" id="platformFilter">
                    <option value="">ëª¨ë“  í”Œë«í¼</option>
                    <option value="youtube">YouTube</option>
                    <option value="instagram">Instagram</option>
                    <option value="tiktok">TikTok</option>
                </select>
                <select class="filter-select" id="limitFilter">
                    <option value="3">3ê°œ í‘œì‹œ</option>
                    <option value="5">5ê°œ í‘œì‹œ</option>
                    <option value="10">10ê°œ í‘œì‹œ</option>
                    <option value="20" selected>20ê°œ í‘œì‹œ</option>
                    <option value="50">50ê°œ í‘œì‹œ</option>
                    <option value="100">100ê°œ í‘œì‹œ</option>
                    <option value="all">ì „ì²´ í‘œì‹œ</option>
                </select>
                <button class="search-btn" onclick="searchVideos()">ğŸ” ê²€ìƒ‰</button>
                <button class="search-btn" onclick="refreshVideoData()" style="background: #4caf50;">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
            </div>
        </div>

        <!-- ì˜ìƒ íƒ­ -->
        <div id="videos-content">
            <div class="content-tabs">
                <div class="content-tab active" onclick="showVideoTab('recent')">ìµœì‹ ìˆœ</div>
                <div class="content-tab" onclick="showVideoTab('popular')">ì¸ê¸°ìˆœ</div>
                <div class="content-tab" onclick="showVideoTab('trending')">íŠ¸ë Œë”©</div>
            </div>
            
            <!-- í”Œë«í¼ ë¹ ë¥¸ í•„í„° ë²„íŠ¼ -->
            <div class="platform-filters" style="
                display: flex;
                gap: 8px;
                padding: 16px 0;
                border-bottom: 1px solid #eee;
                margin-bottom: 16px;
            ">
                <button class="platform-filter-btn active" onclick="filterByPlatform('all')" data-platform="all" style="
                    padding: 8px 16px;
                    border: 2px solid #1976d2;
                    background: #1976d2;
                    color: white;
                    border-radius: 20px;
                    font-size: 12px;
                    cursor: pointer;
                    transition: all 0.2s ease;
                    display: flex;
                    align-items: center;
                    gap: 4px;
                ">
                    ğŸ“º ì „ì²´ (<span id="count-all">0</span>)
                </button>
                <button class="platform-filter-btn" onclick="filterByPlatform('youtube')" data-platform="youtube" style="
                    padding: 8px 16px;
                    border: 2px solid #FF0000;
                    background: white;
                    color: #FF0000;
                    border-radius: 20px;
                    font-size: 12px;
                    cursor: pointer;
                    transition: all 0.2s ease;
                    display: flex;
                    align-items: center;
                    gap: 4px;
                ">
                    ğŸ¬ YouTube (<span id="count-youtube">0</span>)
                </button>
                <button class="platform-filter-btn" onclick="filterByPlatform('instagram')" data-platform="instagram" style="
                    padding: 8px 16px;
                    border: 2px solid #E4405F;
                    background: white;
                    color: #E4405F;
                    border-radius: 20px;
                    font-size: 12px;
                    cursor: pointer;
                    transition: all 0.2s ease;
                    display: flex;
                    align-items: center;
                    gap: 4px;
                ">
                    ğŸ“± Instagram (<span id="count-instagram">0</span>)
                </button>
                <button class="platform-filter-btn" onclick="filterByPlatform('tiktok')" data-platform="tiktok" style="
                    padding: 8px 16px;
                    border: 2px solid #000000;
                    background: white;
                    color: #000000;
                    border-radius: 20px;
                    font-size: 12px;
                    cursor: pointer;
                    transition: all 0.2s ease;
                    display: flex;
                    align-items: center;
                    gap: 4px;
                ">
                    ğŸµ TikTok (<span id="count-tiktok">0</span>)
                </button>
            </div>

            <div class="video-grid" id="video-grid">
                <!-- ì´ˆê¸° ë¡œë”© ì‹œì—ëŠ” ìµœì†Œí•œì˜ ì˜ˆì‹œ ì¹´ë“œë§Œ -->
                <div class="video-card">
                    <div class="thumbnail-container">
                        <div class="thumbnail-placeholder">ğŸ“¹ ì˜ˆì‹œ ì¸ë„¤ì¼</div>
                        <span class="platform-badge youtube">YouTube</span>
                    </div>
                    <div class="video-info">
                        <h3 class="video-title">ìˆ˜ì§‘ëœ ì˜ìƒì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</h3>
                        <div class="channel-info">
                            <div class="channel-avatar">ğŸ‘¤</div>
                            <span class="channel-name">ì˜ˆì‹œ ì±„ë„</span>
                        </div>
                        <div class="video-meta">
                            <span class="category-tag">ì˜ˆì‹œ</span>
                            <span class="date">ë°©ê¸ˆ ì „</span>
                        </div>
                        <div class="video-actions">
                            <button class="action-btn primary" onclick="searchVideos()">ğŸ”„ ì‹¤ì œ ë°ì´í„° ë¡œë“œ</button>
                            <button class="action-btn" onclick="testAPI()">ğŸ§ª API í…ŒìŠ¤íŠ¸</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- YouTube íŠ¸ë Œë”© ì„¹ì…˜ -->
        <div id="trending-content" class="hidden">
            <div class="section-header">
                <h2>ğŸ”¥ YouTube íŠ¸ë Œë”© ì˜ìƒ</h2>
                <p>ìµœê·¼ 7ì¼ê°„ ì¡°íšŒìˆ˜ ë†’ì€ ì˜ìƒë“¤ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ˜ì§‘í•©ë‹ˆë‹¤</p>
            </div>

            <div class="action-bar">
                <button onclick="collectTrendingVideos()" class="btn-primary">
                    ğŸ“Š ìµœì‹  íŠ¸ë Œë“œ ìˆ˜ì§‘
                </button>
                <button onclick="loadTrendingData()" class="btn-secondary">
                    ğŸ”„ íŠ¸ë Œë”© ë°ì´í„° ìƒˆë¡œê³ ì¹¨
                </button>
            </div>

            <!-- íŠ¸ë Œë”© ì˜ìƒ ê·¸ë¦¬ë“œ -->
            <div id="trending-video-grid" class="video-grid">
                <div class="placeholder-message">
                    <h3>ğŸ” íŠ¸ë Œë”© ì˜ìƒì„ ìˆ˜ì§‘í•´ë³´ì„¸ìš”</h3>
                    <p>ìœ„ì˜ "ìµœì‹  íŠ¸ë Œë“œ ìˆ˜ì§‘" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ YouTubeì—ì„œ ê°€ì¥ ì¸ê¸° ìˆëŠ” ì˜ìƒë“¤ì„ ê°€ì ¸ì˜µë‹ˆë‹¤</p>
                </div>
            </div>
        </div>

        <!-- ì±„ë„ íƒ­ -->
        <div id="channels-content" class="hidden">
            <div class="content-tabs">
                <div class="content-tab active" onclick="showChannelTab('all')">ì „ì²´ ì±„ë„</div>
                <div class="content-tab" onclick="showChannelTab('game')">ê²Œì„ (45)</div>
                <div class="content-tab" onclick="showChannelTab('beauty')">ë·°í‹° (28)</div>
                <div class="content-tab" onclick="showChannelTab('cooking')">ìš”ë¦¬ (31)</div>
                <div class="content-tab" onclick="showChannelTab('tech')">ê¸°ìˆ  (22)</div>
            </div>

            <div class="channel-grid">
                <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; background: white; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                    <h3 style="color: #1976d2; margin-bottom: 1rem;">ğŸ“º ì±„ë„ ê´€ë¦¬</h3>
                    <p style="color: #666;">ìˆ˜ì§‘ ëŒ€ìƒ ì±„ë„ë“¤ì„ ê´€ë¦¬í•˜ê³  íŠ¸ë Œë”© ì˜ìƒì„ ìˆ˜ì§‘í•©ë‹ˆë‹¤</p>
                    <div style="margin-top: 2rem;">
                        <button class="action-btn primary" onclick="alert('ì±„ë„ ì¶”ê°€ ê¸°ëŠ¥')">â• ì±„ë„ ì¶”ê°€</button>
                        <button class="action-btn" onclick="alert('ì±„ë„ ëª©ë¡ ë³´ê¸°')">ğŸ“‹ ì±„ë„ ëª©ë¡</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë¶„ì„ íƒ­ -->
        <div id="analytics-content" class="hidden">
            <div style="text-align: center; padding: 3rem; background: white; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                <h2 style="color: #1976d2; margin-bottom: 1rem;">ğŸ“Š ë¶„ì„ ë¦¬í¬íŠ¸</h2>
                <p style="color: #666;">ì¹´í…Œê³ ë¦¬ë³„ íŠ¸ë Œë“œ, ì±„ë„ ì„±ì¥ë¥ , í‚¤ì›Œë“œ ë¶„ì„ ë“±ì´ í‘œì‹œë©ë‹ˆë‹¤</p>
            </div>
        </div>
    </div>
</body>
</html>