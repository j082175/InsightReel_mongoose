<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InsightReel App with Routing</title>
    
    <!-- React & Babel CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        // --- Mock Data ---
        const channelData = [
            { id: 1, name: '개발왕 김코딩', platform: 'YouTube', videoCount: 12, category: 'IT', avatarUrl: 'https://placehold.co/100x100/3B82F6/FFFFFF?text=K', keywords: ['React', 'JavaScript', '코딩'] },
            { id: 2, name: '요리하는 남자', platform: 'TikTok', videoCount: 58, category: 'Food', avatarUrl: 'https://placehold.co/100x100/F43F5E/FFFFFF?text=C', keywords: ['요리', '레시피', '맛집'] },
            { id: 3, name: '카페찾아 삼만리', platform: 'Instagram', videoCount: 120, category: 'Travel', avatarUrl: 'https://placehold.co/100x100/8B5CF6/FFFFFF?text=T', keywords: ['여행', '카페', '감성'] },
            { id: 4, name: '냥냥펀치', platform: 'YouTube', videoCount: 25, category: 'Animal', avatarUrl: 'https://placehold.co/100x100/F97316/FFFFFF?text=P', keywords: ['고양이', '동물', '반려동물'] },
            { id: 5, name: '캠핑은 장비빨', platform: 'YouTube', videoCount: 18, category: 'Travel', avatarUrl: 'https://placehold.co/100x100/22C55E/FFFFFF?text=C', keywords: ['캠핑', '여행', 'VLOG'] }
        ];
        
        const allVideos = [
            { id: 1, platform: 'YouTube', title: '초보자를 위한 React 2025년 최신 가이드 (롱폼)', channelName: '개발왕 김코딩', views: 150000, daysAgo: 0, thumbnailUrl: 'https://placehold.co/600x400/3B82F6/FFFFFF?text=React', channelAvatarUrl: 'https://placehold.co/100x100/3B82F6/FFFFFF?text=K', isTrending: true, embedUrl: 'https://www.youtube.com/embed/t-piB91ftwA?autoplay=1', originalUrl: 'https://www.youtube.com/watch?v=t-piB91ftwA', aspectRatio: '16:9', keywords: ['React', 'JavaScript', '코딩'] },
            { id: 2, platform: 'TikTok', title: '1분 만에 따라하는 제육볶음 황금 레시피', channelName: '요리하는 남자', views: 2350000, daysAgo: 2, thumbnailUrl: 'https://placehold.co/400x600/F43F5E/FFFFFF?text=Food', channelAvatarUrl: 'https://placehold.co/100x100/F43F5E/FFFFFF?text=C', isTrending: true, originalUrl: 'https://www.tiktok.com', aspectRatio: '9:16', keywords: ['요리', '레시피', '맛집'] },
            { id: 3, platform: 'Instagram', title: '요즘 유행하는 한남동 카페 BEST 5', channelName: '카페찾아 삼만리', views: 52000, daysAgo: 0, thumbnailUrl: 'https://placehold.co/400x600/8B5CF6/FFFFFF?text=Cafe', channelAvatarUrl: 'https://placehold.co/100x100/8B5CF6/FFFFFF?text=T', isTrending: false, originalUrl: 'https://www.instagram.com', aspectRatio: '9:16', keywords: ['여행', '카페', '감성'] },
            { id: 4, platform: 'YouTube', title: '우리집 고양이가 천재인 이유 (숏폼)', channelName: '냥냥펀치', views: 320000, daysAgo: 1, thumbnailUrl: 'https://placehold.co/400x600/F97316/FFFFFF?text=Cat', channelAvatarUrl: 'https://placehold.co/100x100/F97316/FFFFFF?text=P', isTrending: false, embedUrl: 'https://www.youtube.com/embed/MPV2METPeJU?autoplay=1', originalUrl: 'https://www.youtube.com/shorts/MPV2METPeJU', aspectRatio: '9:16', keywords: ['고양이', '동물', '반려동물'] },
            { id: 5, platform: 'YouTube', title: '우중 캠핑 VLOG | 빗소리 들으며 휴식', channelName: '캠핑은 장비빨', views: 88000, daysAgo: 3, thumbnailUrl: 'https://placehold.co/400x600/22C55E/FFFFFF?text=Camping', channelAvatarUrl: 'https://placehold.co/100x100/22C55E/FFFFFF?text=C', isTrending: false, embedUrl: 'https://www.youtube.com/embed/ARq1t2402p4?autoplay=1', originalUrl: 'https://www.youtube.com/shorts/ARq1t2402p4', aspectRatio: '9:16', keywords: ['캠핑', '여행', 'VLOG'] },
        ];
        
        const allKeywords = ['React', 'JavaScript', '코딩', '요리', '레시피', '맛집', '여행', '카페', '감성', '고양이', '동물', '반려동물', 'IT', 'Food', 'Travel', 'Animal', '캠핑', 'VLOG'];

        const formatViews = (num) => {
            if (num >= 10000) return (num / 10000).toFixed(0) + '만';
            return num.toLocaleString();
        };
        
        const hangulDecompose = (str) => {
            const CHO = ['ㄱ', 'ㄲ', 'ㄴ', 'ㄷ', 'ㄸ', 'ㄹ', 'ㅁ', 'ㅂ', 'ㅃ', 'ㅅ', 'ㅆ', 'ㅇ', 'ㅈ', 'ㅉ', 'ㅊ', 'ㅋ', 'ㅌ', 'ㅍ', 'ㅎ'];
            const JUNG = ['ㅏ', 'ㅐ', 'ㅑ', 'ㅒ', 'ㅓ', 'ㅔ', 'ㅕ', 'ㅖ', 'ㅗ', 'ㅘ', 'ㅙ', 'ㅚ', 'ㅛ', 'ㅜ', 'ㅝ', 'ㅞ', 'ㅟ', 'ㅠ', 'ㅡ', 'ㅢ', 'ㅣ'];
            const JONG = ['', 'ㄱ', 'ㄲ', 'ㄳ', 'ㄴ', 'ㄵ', 'ㄶ', 'ㄷ', 'ㄹ', 'ㄺ', 'ㄻ', 'ㄼ', 'ㄽ', 'ㄾ', 'ㄿ', 'ㅀ', 'ㅁ', 'ㅂ', 'ㅄ', 'ㅅ', 'ㅆ', 'ㅇ', 'ㅈ', 'ㅊ', 'ㅋ', 'ㅌ', 'ㅍ', 'ㅎ'];
            let result = '';
            for (let i = 0; i < str.length; i++) {
                const charCode = str.charCodeAt(i);
                if (charCode >= 44032 && charCode <= 55203) {
                    const uniValue = charCode - 44032;
                    const choIndex = Math.floor(uniValue / 588);
                    const jungIndex = Math.floor((uniValue % 588) / 28);
                    const jongIndex = uniValue % 28;
                    result += CHO[choIndex] + JUNG[jungIndex];
                    if (jongIndex !== 0) result += JONG[jongIndex];
                } else {
                    result += str.charAt(i);
                }
            }
            return result;
        };

        function Header({ currentPage, onNavigate }) {
            const [isProfileOpen, setProfileOpen] = React.useState(false);
            const navItems = [{ id: 'dashboard', name: '대시보드' }, { id: 'channels', name: '채널 관리' }, { id: 'archive', name: '영상 아카이브' }, { id: 'discovery', name: '소재 발굴' }];
            return (<header className="bg-white shadow-sm sticky top-0 z-20"><div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div className="flex justify-between items-center h-16"><div className="flex items-center space-x-4"><button onClick={() => onNavigate('dashboard')} className="text-2xl font-bold text-indigo-600">🚀 InsightReel</button><nav className="hidden md:flex space-x-2">{navItems.map(item => (<button key={item.id} onClick={() => onNavigate(item.id)} className={`${currentPage === item.id ? 'bg-indigo-100 text-indigo-700' : 'text-gray-500 hover:bg-gray-100'} px-3 py-2 rounded-md text-sm font-medium`}>{item.name}</button>))}</nav></div><div className="relative"><button onClick={() => setProfileOpen(!isProfileOpen)} className="w-10 h-10 bg-gray-200 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"></button>{isProfileOpen && (<div className="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 z-30"><a href="#" className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">계정 설정</a><a href="#" className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">로그아웃</a></div>)}</div></div></div></header>);
        }

        function Footer() {
            return (<footer className="bg-white mt-auto"><div className="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"><div className="flex justify-center space-x-6"><a href="#" className="text-sm text-gray-500 hover:text-gray-900">도움말 센터</a><a href="#" className="text-sm text-gray-500 hover:text-gray-900">문의하기</a><a href="#" className="text-sm text-gray-500 hover:text-gray-900">이용약관</a><a href="#" className="text-sm text-gray-500 hover:text-gray-900">개인정보 처리방침</a></div><p className="mt-8 text-center text-sm text-gray-400">&copy; 2025 InsightReel. All rights reserved.</p></div></footer>);
        }
        
        function VideoModal({ video, onClose }) {
            const [isAnimating, setIsAnimating] = React.useState(false);
            React.useEffect(() => {
                if (video) {
                    const timer = setTimeout(() => setIsAnimating(true), 10);
                    return () => clearTimeout(timer);
                } else setIsAnimating(false);
            }, [video]);
            const handleClose = () => { setIsAnimating(false); setTimeout(onClose, 200); };
            if (!video) return null;
            const isVertical = video.aspectRatio === '9:16';
            const modalSize = isVertical ? 'max-w-sm aspect-[9/16]' : 'max-w-4xl aspect-video';
            return (<div className={`fixed inset-0 z-50 flex items-center justify-center p-4 transition-opacity duration-200 ${isAnimating ? 'bg-black bg-opacity-75' : 'bg-black bg-opacity-0'}`} onClick={handleClose}><div className={`relative w-full ${modalSize} rounded-lg shadow-xl transition-all duration-200 ease-in-out ${isAnimating ? 'opacity-100 scale-100' : 'opacity-0 scale-95'}`} onClick={(e) => e.stopPropagation()}><iframe className="w-full h-full rounded-lg" src={isAnimating ? video.embedUrl : ''} title={video.title} frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen></iframe><button onClick={handleClose} className="absolute -top-3 -right-3 w-8 h-8 bg-white rounded-full text-black text-xl flex items-center justify-center focus:outline-none hover:bg-gray-200">&times;</button></div></div>);
        }

        function DeleteConfirmationModal({ itemToDelete, onConfirm, onCancel }) {
             if (!itemToDelete) return null;
             const isBulk = itemToDelete.type === 'bulk';
             const title = isBulk ? `${itemToDelete.count}개 영상 삭제` : '영상 삭제';
             const message = isBulk ? `정말로 선택한 ${itemToDelete.count}개의 영상을 삭제하시겠습니까?` : `정말로 '${itemToDelete.data.title}' 영상을 삭제하시겠습니까?`;
             return (<div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50"><div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-sm"><h2 className="text-lg font-bold text-gray-900">{title}</h2><p className="mt-2 text-sm text-gray-600">{message} 이 작업은 되돌릴 수 없습니다.</p><div className="mt-6 flex justify-end space-x-3"><button onClick={onCancel} className="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200">취소</button><button onClick={onConfirm} className="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700">삭제</button></div></div></div>);
        }

        function VideoCard({ video, onCardClick, onDeleteClick, isSelectMode, isSelected, onSelectToggle }) {
            const [menuOpen, setMenuOpen] = React.useState(false);
            const platformStyles = { YouTube: { bg: 'bg-red-500' }, TikTok: { bg: 'bg-black' }, Instagram: { bg: 'bg-gradient-to-r from-purple-500 to-pink-500' } };
            const handleClick = (e) => {
                if (isSelectMode) { onSelectToggle(video.id); return; }
                if (video.platform === 'YouTube') onCardClick(video);
                else window.open(video.originalUrl, '_blank', 'noopener,noreferrer');
            };
            const handleMenuToggle = (e) => { e.stopPropagation(); setMenuOpen(!menuOpen); };
            const handleDelete = (e) => { e.stopPropagation(); onDeleteClick({ type: 'single', data: video }); setMenuOpen(false); }
            return (<div onClick={handleClick} className="bg-white rounded-lg shadow-md overflow-hidden transition-all hover:shadow-xl hover:-translate-y-1 group cursor-pointer flex flex-col relative"><div className={`absolute inset-0 z-10 rounded-lg border-4 ${isSelected ? 'border-indigo-500 bg-indigo-500 bg-opacity-10' : 'border-transparent'} transition-all duration-200 pointer-events-none`}></div>{isSelectMode && (<div className={`absolute top-2 left-2 z-20 transition-opacity duration-200 ${isSelectMode ? 'opacity-100' : 'opacity-0'}`}><div className={`w-6 h-6 rounded border-2 flex items-center justify-center ${isSelected ? 'bg-indigo-600 border-indigo-600' : 'bg-white border-gray-300'}`}>{isSelected && <svg className="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="3"><path strokeLinecap="round" strokeLinejoin="round" d="M5 13l4 4L19 7" /></svg>}</div></div>)}<div className="relative w-full aspect-[9/16]"><img className="w-full h-full object-cover" src={video.thumbnailUrl} alt={video.title} />{!isSelectMode && <div className="absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"><svg className="w-16 h-16 text-white" fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clipRule="evenodd"></path></svg></div>}<div className={`absolute top-2 right-2 ${platformStyles[video.platform].bg} text-white text-xs font-bold px-2 py-1 rounded-full flex items-center`}><span>{video.platform}</span></div>{!isSelectMode && <div className="absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity"><button onClick={handleMenuToggle} className="w-8 h-8 rounded-full bg-black bg-opacity-50 text-white flex items-center justify-center hover:bg-opacity-70"><svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"></path></svg></button>{menuOpen && (<div className="absolute left-0 mt-2 w-40 bg-white rounded-md shadow-lg z-10"><button onClick={handleDelete} className="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 flex items-center"><svg className="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z" clipRule="evenodd"></path></svg>삭제하기</button></div>)}</div>}</div><div className="p-4 flex-grow flex flex-col"><h3 className="text-md font-semibold text-gray-800 h-12 overflow-hidden">{video.isTrending && <span className="mr-1">🔥</span>}{video.title}</h3><div className="flex items-center mt-2 text-sm text-gray-500"><img src={video.channelAvatarUrl} className="w-6 h-6 rounded-full mr-2 object-cover"/><span>{video.channelName}</span></div><div className="mt-auto pt-3 text-sm text-gray-600 font-medium"><span>{video.platform === 'Instagram' ? '좋아요' : '조회수'} {formatViews(video.views)}회</span><span className="mx-1">•</span><span>{video.daysAgo === 0 ? '오늘' : `${video.daysAgo}일 전`}</span></div></div></div>);
        };
        
        function VideoListItem({ video, onCardClick, onDeleteClick, isSelectMode, isSelected, onSelectToggle }) {
            const handleClick = (e) => {
                if (isSelectMode) { onSelectToggle(video.id); return; }
                if (video.platform === 'YouTube') onCardClick(video);
                else window.open(video.originalUrl, '_blank', 'noopener,noreferrer');
            };
            return (<div onClick={handleClick} className={`bg-white rounded-lg shadow-sm overflow-hidden transition-all hover:shadow-md hover:bg-gray-50 cursor-pointer flex justify-between items-center relative border-2 ${isSelected ? 'border-indigo-500' : 'border-transparent'}`}><div className="flex items-center flex-grow">{isSelectMode && <div className="p-4" onClick={(e) => {e.stopPropagation(); onSelectToggle(video.id);}}><div className={`w-6 h-6 rounded border-2 flex items-center justify-center ${isSelected ? 'bg-indigo-600 border-indigo-600' : 'bg-white border-gray-300'}`}>{isSelected && <svg className="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="3"><path strokeLinecap="round" strokeLinejoin="round" d="M5 13l4 4L19 7" /></svg>}</div></div>}<img className="w-20 h-32 object-cover" src={video.thumbnailUrl} alt={video.title} /><div className="p-4"><h3 className="text-sm font-semibold text-gray-800">{video.isTrending && <span className="mr-1">🔥</span>}{video.title}</h3><div className="flex items-center mt-2 text-xs text-gray-500"><img src={video.channelAvatarUrl} className="w-5 h-5 rounded-full mr-2 object-cover"/><span>{video.channelName}</span></div><div className="mt-3 text-xs text-gray-600 font-medium"><span>{video.platform === 'Instagram' ? '좋아요' : '조회수'} {formatViews(video.views)}회</span><span className="mx-1">•</span><span>{video.daysAgo === 0 ? '오늘' : `${video.daysAgo}일 전`}</span></div></div></div></div>);
        }

        function ViewControls({ viewMode, setViewMode, gridSize, setGridSize, onSelectModeToggle, isSelectMode }) {
            return (<div className="flex items-center gap-4">{isSelectMode ? (<button onClick={onSelectModeToggle} className="flex items-center gap-2 px-3 py-2 text-sm font-semibold text-white bg-gray-500 rounded-md hover:bg-gray-600 transition-all active:scale-95"><svg className="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2"><path strokeLinecap="round" strokeLinejoin="round" d="M6 18L18 6M6 6l12 12" /></svg><span>취소</span></button>) : (<button onClick={onSelectModeToggle} className="flex items-center gap-2 px-3 py-2 text-sm font-semibold text-indigo-600 bg-indigo-100 rounded-md hover:bg-indigo-200 transition-all active:scale-95"><svg className="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2"><path strokeLinecap="round" strokeLinejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" /></svg><span>선택</span></button>)}<div className="h-6 w-px bg-gray-200"></div>{viewMode === 'grid' && (<div className="flex items-center gap-2"><svg className="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 5h4v4H5V5m10 0h4v4h-4V5M5 15h4v4H5v-4m10 0h4v4h-4v-4Z"></path></svg><input type="range" min="1" max="3" step="1" value={gridSize} onChange={(e) => setGridSize(Number(e.target.value))} className="w-20 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600"/><svg className="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 3h8v8H3V3m10 0h8v8h-8V3M3 13h8v8H3v-8m10 0h8v8h-8v-8Z"></path></svg></div>)}<div className="flex items-center gap-2"><button onClick={() => setViewMode('grid')} className={`p-2 rounded-md ${viewMode === 'grid' ? 'bg-indigo-100 text-indigo-600' : 'text-gray-400 hover:bg-gray-100'}`}><svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg></button><button onClick={() => setViewMode('list')} className={`p-2 rounded-md ${viewMode === 'list' ? 'bg-indigo-100 text-indigo-600' : 'text-gray-400 hover:bg-gray-100'}`}><svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clipRule="evenodd"></path></svg></button></div></div>)
        }
        
        function SelectionActionBar({ count, onSelectAll, onDelete, onCancel }) {
            return (<div className="fixed bottom-10 left-1/2 -translate-x-1/2 z-30 bg-white rounded-lg shadow-2xl p-3 flex items-center gap-4 transition-transform duration-300 ease-out transform"><span className="font-bold text-indigo-600">{count}개 선택됨</span><div className="h-6 w-px bg-gray-200"></div><button onClick={onSelectAll} className="text-sm font-medium text-gray-700 hover:text-indigo-600">전체 선택</button><button onClick={onDelete} disabled={count === 0} className="text-sm font-medium text-red-600 hover:text-red-800 disabled:text-gray-400 disabled:cursor-not-allowed">선택 항목 삭제</button><div className="h-6 w-px bg-gray-200"></div><button onClick={onCancel} className="text-sm font-medium text-gray-700 hover:text-indigo-600">취소</button></div>);
        }

        function DashboardPage() {
            const [videos, setVideos] = React.useState(allVideos);
            const [filters, setFilters] = React.useState({ days: '7', views: '100000', platform: 'All' });
            const [selectedVideo, setSelectedVideo] = React.useState(null);
            const [itemToDelete, setItemToDelete] = React.useState(null);
            const [viewMode, setViewMode] = React.useState('grid');
            const [gridSize, setGridSize] = React.useState(1);
            const [isSelectMode, setIsSelectMode] = React.useState(false);
            const [selectedVideos, setSelectedVideos] = React.useState(new Set());
            const gridLayouts = { 1: 'grid-cols-4 sm:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8', 2: 'grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6', 3: 'grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5' };
            React.useEffect(() => { let filtered = allVideos.filter(v => v.daysAgo <= parseInt(filters.days) && v.views >= parseInt(filters.views)); if (filters.platform !== 'All') filtered = filtered.filter(v => v.platform === filters.platform); setVideos(filtered);}, [filters]);
            const handleDelete = () => { if (itemToDelete.type === 'single') { setVideos(videos.filter(v => v.id !== itemToDelete.data.id)); } else { setVideos(videos.filter(v => !selectedVideos.has(v.id))); setIsSelectMode(false); setSelectedVideos(new Set()); } setItemToDelete(null); };
            const handleSelectToggle = (videoId) => { const newSelection = new Set(selectedVideos); if (newSelection.has(videoId)) newSelection.delete(videoId); else newSelection.add(videoId); setSelectedVideos(newSelection); };
            const handleSelectAll = () => { if (selectedVideos.size === videos.length) setSelectedVideos(new Set()); else setSelectedVideos(new Set(videos.map(v => v.id))); };
            const handleFilterChange = (e) => setFilters({ ...filters, [e.target.name]: e.target.value });
            const KpiCard = ({ title, value, change }) => (<div className="bg-white p-6 rounded-lg shadow"><h3 className="text-sm font-medium text-gray-500">{title}</h3><p className="mt-2 text-3xl font-bold text-gray-900">{value}</p><p className="mt-1 text-sm text-green-600">{change}</p></div>);
            return (<><main className="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full"><div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"><KpiCard title="수집한 채널" value="128" change="+5개 지난 주" /><KpiCard title="새로운 인기 영상 (24시간)" value="12" change="+3개 어제" /><KpiCard title="총 영상" value="2,408" change="+120개 지난 주" /></div><div className="bg-white p-6 rounded-lg shadow"><h2 className="text-xl font-bold text-gray-800 mb-4">🔥 최신 인기 영상</h2><div className="flex flex-wrap items-center justify-between gap-4 mb-6 pb-4 border-b"><div className="flex flex-wrap items-center gap-4"><select name="days" value={filters.days} onChange={handleFilterChange} className="border-gray-300 rounded-md shadow-sm"><option value="1">최근 1일</option><option value="3">최근 3일</option><option value="7">최근 1주</option></select><select name="views" value={filters.views} onChange={handleFilterChange} className="border-gray-300 rounded-md shadow-sm"><option value="50000">5만 조회수 이상</option><option value="100000">10만 조회수 이상</option></select><select name="platform" value={filters.platform} onChange={handleFilterChange} className="border-gray-300 rounded-md shadow-sm"><option value="All">모든 플랫폼</option><option value="YouTube">YouTube</option><option value="TikTok">TikTok</option></select></div><ViewControls viewMode={viewMode} setViewMode={setViewMode} gridSize={gridSize} setGridSize={setGridSize} isSelectMode={isSelectMode} onSelectModeToggle={() => {setIsSelectMode(!isSelectMode); setSelectedVideos(new Set());}} /></div>{videos.length > 0 ? ( viewMode === 'grid' ? <div className={`grid ${gridLayouts[gridSize]} gap-6`}>{videos.map(video => <VideoCard key={video.id} video={video} onCardClick={setSelectedVideo} onDeleteClick={setItemToDelete} isSelectMode={isSelectMode} isSelected={selectedVideos.has(video.id)} onSelectToggle={handleSelectToggle} />)}</div> : <div className="grid grid-cols-1 md:grid-cols-2 gap-4">{videos.map(video => <VideoListItem key={video.id} video={video} onCardClick={setSelectedVideo} onDeleteClick={setItemToDelete} isSelectMode={isSelectMode} isSelected={selectedVideos.has(video.id)} onSelectToggle={handleSelectToggle} />)}</div> ) : (<div className="text-center py-12 text-gray-500"><p className="text-lg">😅</p><p className="mt-2">해당 조건에 맞는 영상이 없습니다.</p></div>)}</div></main><VideoModal video={selectedVideo} onClose={() => setSelectedVideo(null)} /><DeleteConfirmationModal itemToDelete={itemToDelete} onConfirm={handleDelete} onCancel={() => setItemToDelete(null)} />{isSelectMode && <SelectionActionBar count={selectedVideos.size} onSelectAll={handleSelectAll} onDelete={() => setItemToDelete({type: 'bulk', count: selectedVideos.size})} onCancel={() => { setIsSelectMode(false); setSelectedVideos(new Set()); }} />}</>);
        }

        function ChannelManagementPage() {
            const [channels, setChannels] = React.useState(channelData);
            const [searchTerm, setSearchTerm] = React.useState('');
            const filteredChannels = channels.filter(c => c.name.toLowerCase().includes(searchTerm.toLowerCase()));
            const platformStyles = { YouTube: { bg: 'bg-red-100', text: 'text-red-800' }, TikTok: { bg: 'bg-gray-800', text: 'text-white' }, Instagram: { bg: 'bg-purple-100', text: 'text-purple-800' } };
            return (<main className="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full"><h1 className="text-3xl font-bold text-gray-900 mb-6">🗂️ 채널 관리</h1><div className="bg-white p-6 rounded-lg shadow"><div className="flex flex-wrap items-center justify-between gap-4 mb-6 pb-4 border-b"><div className="relative"><input type="text" placeholder="채널 이름 검색..." value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} className="pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm"/><div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg className="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clipRule="evenodd" /></svg></div></div><button className="px-4 py-2 bg-indigo-600 text-white font-semibold rounded-md shadow-sm hover:bg-indigo-700">+ 새 채널 추가</button></div><div className="overflow-x-auto"><table className="min-w-full divide-y divide-gray-200"><thead className="bg-gray-50"><tr><th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">채널</th><th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">플랫폼</th><th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">수집된 영상</th><th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">카테고리</th><th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">키워드</th><th scope="col" className="relative px-6 py-3"><span className="sr-only">Edit</span></th></tr></thead><tbody className="bg-white divide-y divide-gray-200">{filteredChannels.map(channel => (<tr key={channel.id} className="hover:bg-gray-50"><td className="px-6 py-4"><div className="flex items-center"><div className="flex-shrink-0 h-10 w-10"><img className="h-10 w-10 rounded-full object-cover" src={channel.avatarUrl}/></div><div className="ml-4"><div className="text-sm font-medium text-gray-900">{channel.name}</div></div></div></td><td className="px-6 py-4"><span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${platformStyles[channel.platform].bg} ${platformStyles[channel.platform].text}`}>{channel.platform}</span></td><td className="px-6 py-4 text-sm text-gray-500">{channel.videoCount}개</td><td className="px-6 py-4 text-sm text-gray-500">{channel.category}</td><td className="px-6 py-4"><div className="flex flex-wrap gap-1">{channel.keywords.map(kw => <span key={kw} className="px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-800">{kw}</span>)}</div></td><td className="px-6 py-4 text-right text-sm font-medium"><a href="#" className="text-indigo-600 hover:text-indigo-900">수정</a></td></tr>))}</tbody></table></div></div></main>);
        }

        function VideoArchivePage() {
            const [videos, setVideos] = React.useState(allVideos);
            const [selectedVideo, setSelectedVideo] = React.useState(null);
            const [itemToDelete, setItemToDelete] = React.useState(null);
            const [viewMode, setViewMode] = React.useState('grid');
            const [gridSize, setGridSize] = React.useState(1);
            const [isSelectMode, setIsSelectMode] = React.useState(false);
            const [selectedVideos, setSelectedVideos] = React.useState(new Set());
            const gridLayouts = { 1: 'grid-cols-4 sm:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8', 2: 'grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6', 3: 'grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5' };
            
            const handleDelete = () => {
                if (itemToDelete.type === 'single') {
                    setVideos(videos.filter(v => v.id !== itemToDelete.data.id));
                } else {
                    setVideos(videos.filter(v => !selectedVideos.has(v.id)));
                    setIsSelectMode(false);
                    setSelectedVideos(new Set());
                }
                setItemToDelete(null);
            };

            const handleSelectToggle = (videoId) => {
                const newSelection = new Set(selectedVideos);
                if (newSelection.has(videoId)) newSelection.delete(videoId);
                else newSelection.add(videoId);
                setSelectedVideos(newSelection);
            };

            const handleSelectAll = () => {
                if (selectedVideos.size === videos.length) {
                    setSelectedVideos(new Set());
                } else {
                    setSelectedVideos(new Set(videos.map(v => v.id)));
                }
            };

            return (<><main className="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full"><h1 className="text-3xl font-bold text-gray-900 mb-6">🎞️ 영상 아카이브</h1><div className="bg-white p-6 rounded-lg shadow"><div className="flex flex-wrap items-center justify-between gap-4 mb-6 pb-4 border-b"><div className="flex flex-wrap items-center gap-4"><input type="text" placeholder="제목, 채널명 검색..." className="border-gray-300 rounded-md shadow-sm"/><select className="border-gray-300 rounded-md shadow-sm"><option>모든 플랫폼</option><option>YouTube</option><option>TikTok</option><option>Instagram</option></select><select className="border-gray-300 rounded-md shadow-sm"><option>최신순</option><option>조회수 높은순</option></select><button className="px-4 py-2 bg-indigo-600 text-white font-semibold rounded-md shadow-sm hover:bg-indigo-700">검색</button></div><ViewControls viewMode={viewMode} setViewMode={setViewMode} gridSize={gridSize} setGridSize={setGridSize} isSelectMode={isSelectMode} onSelectModeToggle={() => {setIsSelectMode(!isSelectMode); setSelectedVideos(new Set());}} /></div>{videos.length > 0 ? ( viewMode === 'grid' ? <div className={`grid ${gridLayouts[gridSize]} gap-6`}>{videos.map(video => <VideoCard key={video.id} video={video} onCardClick={setSelectedVideo} onDeleteClick={setItemToDelete} isSelectMode={isSelectMode} isSelected={selectedVideos.has(video.id)} onSelectToggle={handleSelectToggle} />)}</div> : <div className="grid grid-cols-1 md:grid-cols-2 gap-4">{videos.map(video => <VideoListItem key={video.id} video={video} onCardClick={setSelectedVideo} onDeleteClick={setItemToDelete} isSelectMode={isSelectMode} isSelected={selectedVideos.has(video.id)} onSelectToggle={handleSelectToggle} />)}</div> ) : (<div className="text-center py-12 text-gray-500"><p>영상이 없습니다.</p></div>)}</div></main><VideoModal video={selectedVideo} onClose={() => setSelectedVideo(null)} /><DeleteConfirmationModal itemToDelete={itemToDelete} onConfirm={handleDelete} onCancel={() => setItemToDelete(null)} />{isSelectMode && <SelectionActionBar count={selectedVideos.size} onSelectAll={handleSelectAll} onDelete={() => setItemToDelete({type: 'bulk', count: selectedVideos.size})} onCancel={() => { setIsSelectMode(false); setSelectedVideos(new Set()); }} />}</>);
        }
        
        // --- 소재 발굴 페이지 컴포넌트 ---
        function TagInput({ selectedTags, setSelectedTags, availableKeywords }) {
            const [inputValue, setInputValue] = React.useState('');
            const [suggestions, setSuggestions] = React.useState([]);
            const handleInputChange = (e) => {
                const value = e.target.value;
                setInputValue(value);
                if (value) {
                    const decomposedValue = hangulDecompose(value.toLowerCase());
                    const filtered = availableKeywords.filter(kw => 
                        hangulDecompose(kw.toLowerCase()).startsWith(decomposedValue)
                    );
                    setSuggestions(filtered.filter(kw => !selectedTags.includes(kw)).slice(0, 5));
                } else {
                    setSuggestions([]);
                }
            };
            const addTag = (tag) => {
                if (!selectedTags.includes(tag)) setSelectedTags([...selectedTags, tag]);
                setInputValue('');
                setSuggestions([]);
            };
            const removeTag = (tagToRemove) => setSelectedTags(selectedTags.filter(tag => tag !== tagToRemove));
            return (
                <div className="relative"><div className="flex flex-wrap gap-2 p-2 border border-gray-300 rounded-md">{selectedTags.map(tag => (<div key={tag} className="flex items-center gap-2 bg-indigo-100 text-indigo-700 text-sm font-medium px-3 py-1 rounded-full"><span>{tag}</span><button onClick={() => removeTag(tag)} className="text-indigo-500 hover:text-indigo-700">&times;</button></div>))}<input type="text" value={inputValue} onChange={handleInputChange} placeholder="키워드 선택..." className="flex-grow outline-none bg-transparent p-1"/></div>{suggestions.length > 0 && (<ul className="absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto">{suggestions.map(suggestion => (<li key={suggestion} onClick={() => addTag(suggestion)} className="px-4 py-2 cursor-pointer hover:bg-gray-100">{suggestion}</li>))}</ul>)}</div>
            );
        }

        function ContentDiscoveryPage() {
            const [selectedKeywords, setSelectedKeywords] = React.useState([]);
            const [searchLogic, setSearchLogic] = React.useState('OR'); // 'OR' or 'AND'
            const [videoFilters, setVideoFilters] = React.useState({ days: '3', views: '100000' });
            const [isLoadingChannels, setIsLoadingChannels] = React.useState(false);
            const [isLoadingVideos, setIsLoadingVideos] = React.useState(false);
            const [foundChannels, setFoundChannels] = React.useState([]);
            const [foundVideos, setFoundVideos] = React.useState([]);
            const [selectedVideo, setSelectedVideo] = React.useState(null);
            const [itemToDelete, setItemToDelete] = React.useState(null);
            const [activeTab, setActiveTab] = React.useState('channels');
            const [viewMode, setViewMode] = React.useState('grid');
            const [gridSize, setGridSize] = React.useState(1);
            const [isSelectMode, setIsSelectMode] = React.useState(false);
            const [selectedVideos, setSelectedVideos] = React.useState(new Set());
            const gridLayouts = { 1: 'grid-cols-4 sm:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8', 2: 'grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6', 3: 'grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5' };

            const handleVideoFilterChange = (e) => setVideoFilters({ ...videoFilters, [e.target.name]: e.target.value });
            const handleChannelSearch = () => {
                if (selectedKeywords.length === 0) { alert('키워드를 하나 이상 선택해주세요.'); return; }
                setIsLoadingChannels(true);
                setFoundChannels([]);
                setFoundVideos([]);
                setActiveTab('channels');
                setTimeout(() => {
                    const channels = channelData.filter(c => {
                        if(searchLogic === 'AND') {
                            return selectedKeywords.every(kw => c.keywords.includes(kw));
                        }
                        return c.keywords.some(kw => selectedKeywords.includes(kw));
                    });
                    setFoundChannels(channels);
                    setIsLoadingChannels(false);
                }, 1000);
            };
            const handleVideoSearch = () => {
                setIsLoadingVideos(true);
                setFoundVideos([]);
                setTimeout(() => {
                    const foundChannelNames = new Set(foundChannels.map(c => c.name));
                    const videos = allVideos.filter(v => foundChannelNames.has(v.channelName) && v.daysAgo <= parseInt(videoFilters.days) && v.views >= parseInt(videoFilters.views));
                    setFoundVideos(videos);
                    setActiveTab('videos');
                    setIsLoadingVideos(false);
                }, 1500);
            };
            const handleDelete = () => {
                if (itemToDelete.type === 'single') {
                    setFoundVideos(foundVideos.filter(v => v.id !== itemToDelete.data.id));
                } else {
                    setFoundVideos(foundVideos.filter(v => !selectedVideos.has(v.id)));
                    setIsSelectMode(false);
                    setSelectedVideos(new Set());
                }
                setItemToDelete(null);
            };
            const handleSelectToggle = (videoId) => {
                const newSelection = new Set(selectedVideos);
                if (newSelection.has(videoId)) newSelection.delete(videoId);
                else newSelection.add(videoId);
                setSelectedVideos(newSelection);
            };
            const handleSelectAll = () => {
                if (selectedVideos.size === foundVideos.length) {
                    setSelectedVideos(new Set());
                } else {
                    setSelectedVideos(new Set(foundVideos.map(v => v.id)));
                }
            };
            const ChannelListItem = ({ channel }) => (<div className="flex items-center p-3 border-b hover:bg-gray-50"><img src={channel.avatarUrl} className="w-10 h-10 rounded-full object-cover"/><div className="ml-4"><div className="text-sm font-medium text-gray-900">{channel.name}</div><div className="text-xs text-gray-500">{channel.platform} • {channel.category}</div></div></div>);
            
            return (
                <main className="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
                    <h1 className="text-3xl font-bold text-gray-900 mb-6">💡 소재 발굴</h1>
                    <div className="bg-white p-6 rounded-lg shadow"><h2 className="text-lg font-semibold text-gray-800 mb-2">1단계: 관련 채널 찾기</h2><p className="text-sm text-gray-500 mb-4">데이터베이스에 저장된 키워드를 선택하여 관련 채널을 찾아보세요.</p>
                        <div className="flex flex-wrap items-center gap-4">
                             <div className="flex-grow min-w-[300px]">
                                <TagInput selectedTags={selectedKeywords} setSelectedTags={setSelectedKeywords} availableKeywords={allKeywords} />
                            </div>
                            <div className="flex items-center gap-2 flex-shrink-0">
                                <div className="flex rounded-md shadow-sm">
                                    <button onClick={() => setSearchLogic('OR')} className={`relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 text-sm font-medium ${searchLogic === 'OR' ? 'bg-indigo-600 text-white border-indigo-600 z-10' : 'bg-white text-gray-700 hover:bg-gray-50'}`}>하나라도 포함 (OR)</button>
                                    <button onClick={() => setSearchLogic('AND')} className={`relative -ml-px inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 text-sm font-medium ${searchLogic === 'AND' ? 'bg-indigo-600 text-white border-indigo-600 z-10' : 'bg-white text-gray-700 hover:bg-gray-50'}`}>모든 키워드 포함 (AND)</button>
                                </div>
                                <button onClick={handleChannelSearch} disabled={isLoadingChannels} className="px-6 py-2 bg-indigo-600 text-white font-semibold rounded-md shadow-sm hover:bg-indigo-700 disabled:bg-gray-400 flex items-center justify-center w-32">{isLoadingChannels ? <svg className="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle><path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> : '채널 찾기'}</button>
                            </div>
                        </div>
                    </div>
                    {foundChannels.length > 0 && (<div className="bg-white p-6 rounded-lg shadow mt-8"><h2 className="text-lg font-semibold text-gray-800 mb-4">2단계: 인기 영상 찾기</h2><div className="flex flex-wrap items-center gap-4"><select name="days" value={videoFilters.days} onChange={handleVideoFilterChange} className="border-gray-300 rounded-md shadow-sm">{Array.from({ length: 15 }, (_, i) => i + 1).map(day => (<option key={day} value={day}>최근 {day}일</option>))}</select><select name="views" value={videoFilters.views} onChange={handleVideoFilterChange} className="border-gray-300 rounded-md shadow-sm">{Array.from({ length: 10 }, (_, i) => (i + 1) * 10000).map(viewCount => (<option key={viewCount} value={viewCount}>{viewCount / 10000}만 조회수 이상</option>))}</select><button onClick={handleVideoSearch} disabled={isLoadingVideos} className="px-6 py-2 bg-indigo-600 text-white font-semibold rounded-md shadow-sm hover:bg-indigo-700 disabled:bg-gray-400 flex items-center justify-center w-48">{isLoadingVideos ? <svg className="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle><path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> : `찾은 ${foundChannels.length}개 채널에서 영상 찾기`}</button></div></div>)}
                    { (isLoadingChannels || isLoadingVideos || foundChannels.length > 0) &&
                        <div className="mt-8">
                            <div className="border-b border-gray-200">
                                <nav className="-mb-px flex space-x-8" aria-label="Tabs">
                                    <button onClick={() => setActiveTab('channels')} className={`${activeTab === 'channels' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`}>발견된 채널 ({foundChannels.length})</button>
                                    <button onClick={() => setActiveTab('videos')} disabled={foundVideos.length === 0} className={`${activeTab === 'videos' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm disabled:text-gray-300 disabled:cursor-not-allowed`}>발견된 영상 ({foundVideos.length})</button>
                                </nav>
                            </div>
                            <div className="mt-6">
                                {activeTab === 'channels' && ( <div className="bg-white rounded-lg shadow overflow-hidden"><div className="max-h-96 overflow-y-auto">{foundChannels.map(ch => <ChannelListItem key={ch.id} channel={ch} />)}</div></div> )}
                                {activeTab === 'videos' && (
                                    <div>
                                        <div className="flex justify-end mb-4">
                                            <ViewControls viewMode={viewMode} setViewMode={setViewMode} gridSize={gridSize} setGridSize={setGridSize} isSelectMode={isSelectMode} onSelectModeToggle={() => {setIsSelectMode(!isSelectMode); setSelectedVideos(new Set());}} />
                                        </div>
                                        {foundVideos.length > 0 ? ( viewMode === 'grid' ? <div className={`grid ${gridLayouts[gridSize]} gap-6`}>{foundVideos.map(video => <VideoCard key={video.id} video={video} onCardClick={setSelectedVideo} onDeleteClick={setItemToDelete} isSelectMode={isSelectMode} isSelected={selectedVideos.has(video.id)} onSelectToggle={handleSelectToggle} />)}</div> : <div className="grid grid-cols-1 md:grid-cols-2 gap-4">{foundVideos.map(video => <VideoListItem key={video.id} video={video} onCardClick={setSelectedVideo} onDeleteClick={setItemToDelete} isSelectMode={isSelectMode} isSelected={selectedVideos.has(video.id)} onSelectToggle={handleSelectToggle} />)}</div> ) : (<div className="text-center py-12 text-gray-500"><p>영상이 없습니다.</p></div>)}
                                    </div>
                                )}
                            </div>
                        </div>
                    }
                     <VideoModal video={selectedVideo} onClose={() => setSelectedVideo(null)} />
                     <DeleteConfirmationModal itemToDelete={itemToDelete} onConfirm={() => { if(itemToDelete.type === 'bulk') handleDelete(); else handleDeleteVideo(); }} onCancel={() => setItemToDelete(null)} />
                     {isSelectMode && activeTab === 'videos' && <SelectionActionBar count={selectedVideos.size} onSelectAll={handleSelectAll} onDelete={() => setItemToDelete({type: 'bulk', count: selectedVideos.size})} onCancel={() => { setIsSelectMode(false); setSelectedVideos(new Set()); }} />}
                </main>
            );
        }


        // --- 메인 App 컴포넌트 (라우팅 로직 포함) ---
        function App() {
            const [currentPage, setCurrentPage] = React.useState('dashboard');

            const renderPage = () => {
                switch (currentPage) {
                    case 'dashboard': return <DashboardPage />;
                    case 'channels': return <ChannelManagementPage />;
                    case 'archive': return <VideoArchivePage />;
                    case 'discovery': return <ContentDiscoveryPage />;
                    default: return <DashboardPage />;
                }
            };

            return (
                <div className="min-h-screen flex flex-col">
                    <Header currentPage={currentPage} onNavigate={setCurrentPage} />
                    {renderPage()}
                    <Footer />
                </div>
            );
        }

        // --- React 앱을 HTML에 렌더링 ---
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>

